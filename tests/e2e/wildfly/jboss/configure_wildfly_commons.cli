
# console-log-level
set consoleLogLevel=${CONSOLE_LOG_LEVEL}
if (result ~= "(TRACE|DEBUG|INFO|WARN|ERROR|FATAL)") of :resolve-expression(expression=$consoleLogLevel)
	echo \>\>\> set console-log-level to $consoleLogLevel
	/subsystem=logging/console-handler=CONSOLE:write-attribute(name=level,value=$consoleLogLevel)
end-if

# set custom max-post-size
set maxPostSize=${MAX_POST_SIZE}
if (result ~= "[0-9]+") of :resolve-expression(expression=$maxPostSize)
	try
		echo \>\>\> set max-post-size to $maxPostSize
		/subsystem=undertow/server=default-server/http-listener=default/:write-attribute(name=max-post-size,value=$maxPostSize)
		/subsystem=undertow/server=default-server/https-listener=https/:write-attribute(name=max-post-size,value=$maxPostSize)
	catch
		echo \<\<\< FAILED set max-post-size
	end-try
end-if

# set custom max-child-elements
set maxChildElements=${MAX_CHILD_ELEMENTS}
if (result ~= "[0-9]+") of :resolve-expression(expression=$maxChildElements)
	try
		echo \>\>\> set max-child-elements to $maxChildElements
		/system-property=org.apache.cxf.stax.maxChildElements:add(value=$maxChildElements)
	catch
		echo \<\<\< FAILED set max-child-elements
	end-try
end-if
